---
name: Tekton Bundle Push
on:  # yamllint disable-line rule:truthy
  push:
    branches: ['main']
    paths:
      - 'catalog/*/*/*/*.yaml' # E.G. catalog/pipeline/release/0.2/release.yaml
      - '!catalog/*/*/*/samples/**' # negated paths
      - '!catalog/*/*/*/tests/**'
  workflow_dispatch:
jobs:
  run-pipeline:
    name: Tekton Bundle
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0  # âˆˆ(2,0) where 0 = all history, and 2 is the minimum.
          since_last_remote_commit: true
      - name: Get changed files
        id: changed-files
        uses: tj-actions/changed-files@v35
        with:
          files: |
            catalog/*/*/*/*.yaml
      - name: Show changed files
        run: |
          echo ${{ steps.changed-files.outputs.all_changed_files }}
